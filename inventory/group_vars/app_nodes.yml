# =============================================================================
# APPLICATION NODES VARIABLES
# =============================================================================
# Áp dụng cho nodes trong group [app_nodes]
# =============================================================================

---
# Node identification
node_role: application
node_description: "Application Node - Odoo"

# Odoo settings
odoo_version: "17.0"
odoo_port: 8069
odoo_longpolling_port: 8072
odoo_workers: 4

# Database connection (qua WireGuard)
odoo_db_host: "10.10.0.10"  # db-primary WireGuard IP
odoo_db_port: 5432
odoo_db_name: "odoo"
# odoo_db_user: "{{ vault_odoo_db_user }}"
# odoo_db_password: "{{ vault_odoo_db_password }}"

# Firewall - Odoo ports chỉ từ WireGuard hoặc reverse proxy
ufw_app_rules:
  - { port: 8069, proto: "tcp", from: "10.10.0.0/24", comment: "Odoo from WireGuard" }
  - { port: 8072, proto: "tcp", from: "10.10.0.0/24", comment: "Odoo longpolling" }
  - { port: 22, proto: "tcp", from: "10.10.0.0/24", comment: "SSH from WireGuard" }

# Resource allocation
app_resources:
  memory_limit: "4G"
  cpu_limit: "4"
